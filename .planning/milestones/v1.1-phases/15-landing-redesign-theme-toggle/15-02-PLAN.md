---
phase: 15-landing-redesign-theme-toggle
plan: 02
type: execute
wave: 2
depends_on:
  - "15-01"
files_modified:
  - apps/web/src/app/page.tsx
autonomous: false
requirements:
  - LANDING-01
  - LANDING-02
  - LANDING-03

must_haves:
  truths:
    - "Лендинг отображается в светлой теме по умолчанию с премиальным видом (design-v4a)"
    - "Toggle Sun/Moon в header переключает тему, весь лендинг перерисовывается с плавным fade ~300ms"
    - "Тёмная тема визуально идентична по верстке, отличается цветами (design-v1)"
    - "CTA блок внизу тёмный в обеих темах (bg-[#0A0F25])"
    - "Sticky header с backdrop-blur в обеих темах"
    - "SVG radar chart корректно отображается в обеих темах"
  artifacts:
    - path: "apps/web/src/app/page.tsx"
      provides: "Unified landing page с theme-aware CSS переменными"
      min_lines: 300
      contains: "data-landing-theme"
  key_links:
    - from: "apps/web/src/app/page.tsx"
      to: "apps/web/src/components/shared/ThemeToggle.tsx"
      via: "ThemeToggle в header навигации"
      pattern: "ThemeToggle"
    - from: "apps/web/src/app/page.tsx"
      to: "apps/web/src/app/globals.css"
      via: "CSS-переменные var(--landing-*)"
      pattern: "var\\(--landing-"
---

<objective>
Заменить текущий лендинг (app/page.tsx) на единый тематизируемый компонент, объединяющий design-v4a (light) и design-v1 (dark) через CSS-переменные из Plan 01.

Purpose: Премиальный лендинг с переключением тем — основная задача Phase 15.
Output: Полностью рабочий app/page.tsx с ThemeToggle в навигации.
</objective>

<execution_context>
@C:/Users/Zebrosha/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Zebrosha/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-landing-redesign-theme-toggle/15-CONTEXT.md
@.planning/phases/15-landing-redesign-theme-toggle/15-01-SUMMARY.md
@apps/web/src/app/design-v4a/page.tsx
@apps/web/src/app/design-v1/page.tsx
@apps/web/src/app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Заменить app/page.tsx на unified themeable landing</name>
  <files>apps/web/src/app/page.tsx</files>
  <action>
Полностью заменить содержимое `apps/web/src/app/page.tsx` на единый компонент, использующий CSS-переменные из Plan 01.

**Базовая структура:** Взять layout из `design-v4a/page.tsx` (light) как основу. Заменить все захардкоженные цвета на CSS-переменные `var(--landing-*)`.

**Директива:** `'use client'` — нужен для useTheme hook.

**Импорты:**
- Link from 'next/link'
- Logo, LogoMark from '@/components/shared/Logo'
- Button from '@/components/ui/button'
- Badge from '@/components/ui/badge'
- ThemeToggle from '@/components/shared/ThemeToggle'
- useTheme from '@/components/shared/ThemeProvider'

**Навигация (header):**
- Sticky: `sticky top-0 z-50 backdrop-blur-md` с `bg-[var(--landing-nav-bg)]`
- Border: `border-b` с `border-[var(--landing-border)]`
- Порядок элементов справа: `[ThemeToggle] [Войти] [Начать бесплатно]` (per CONTEXT.md)
- Logo: условный variant — `useTheme().theme === 'dark' ? 'white' : 'default'`
- "Войти" link: `text-[var(--landing-text-muted)] hover:text-[var(--landing-text)]`

**Замена цветов (ключевые маппинги):**

| Hardcoded (v4a light) | CSS Variable |
|---|---|
| `bg-[#FAFBFC]` | `bg-[var(--landing-bg)]` |
| `text-gray-900` | `text-[var(--landing-text)]` |
| `text-gray-500` | `text-[var(--landing-text-muted)]` |
| `text-gray-400`, `text-gray-300` | `text-[var(--landing-text-faint)]` |
| `border-gray-200/60` | `border-[var(--landing-border)]` |
| `bg-white` (cards) | `bg-[var(--landing-card-bg)]` |
| `border-gray-200/80` (cards) | `border-[var(--landing-card-border)]` |
| `shadow-gray-200/50` | `shadow-[var(--landing-card-shadow)]` |
| `#10B981` (green accent) | `var(--landing-green)` |
| `selection:bg-[#2C4FF8]/15` | `selection:bg-[var(--landing-selection-bg)]` |

**SVG Radar Chart:**
- Grid pentagons stroke: `var(--landing-radar-grid)`
- Axis lines stroke: `var(--landing-radar-axis)`
- Data polygon fill: `var(--landing-radar-fill)`, stroke: `var(--landing-radar-stroke)`
- Data dots stroke: `var(--landing-radar-dot-stroke)` (dot fill цвета — одинаковые в обеих темах per CONTEXT.md)
- Labels fill: `var(--landing-radar-label)`

**Bento Features:**
- В light теме: `from-indigo-50 to-blue-50/50` etc. (gradient accents)
- В dark теме: `from-[#2C4FF8]/20 to-[#818CF8]/10` etc.
- Решение: использовать `useTheme()` для условного выбора accent класса. Определить массив `bentoFeatures` с двумя вариантами accent: `accentLight` и `accentDark`. В рендере: `theme === 'dark' ? f.accentDark : f.accentLight`.
- Аналогично для icon colors: v4a имеет `iconColor` per feature, v1 использует единый `text-white/40`.
- В dark теме: убрать `iconColor`, использовать `text-white/40 group-hover:text-white/70`
- В light теме: использовать per-feature `iconColor` с `opacity-50 group-hover:opacity-100`

**Stats section:**
- Числа gradient: light `from-gray-900 to-gray-400`, dark `from-white to-white/60`
- Решение: CSS-переменная `--landing-stats-gradient-from` и `--landing-stats-gradient-to`, или условный класс через theme.

**Section Badges ("Возможности", "Процесс"):**
- `bg-[var(--landing-section-badge-bg)]`, `text-[var(--landing-section-badge-text)]`, `border-[var(--landing-section-badge-border)]`

**Timeline connector:**
- Gradient: `from-[var(--landing-timeline-from)] via-[var(--landing-timeline-via)] to-[var(--landing-timeline-to)]`

**Hero gradient text ("осмысленно"):**
- Light: `from-[#2C4FF8] via-[#6366F1] to-[#2C4FF8]`
- Dark: `from-[#2C4FF8] via-[#818CF8] to-[#87F50F]`
- Решение: условный класс через theme.

**CTA блок:**
- ВСЕГДА тёмный `bg-[#0A0F25]` — НЕ зависит от темы (per CONTEXT.md)
- Текст всегда белый
- LogoMark variant="white"

**Footer:**
- Logo variant условный (как в header)
- Copyright text: `text-[var(--landing-text-faint)]`

**Animations:**
- `<style>` блок с keyframes — одинаковый для обеих тем
- Добавить CSS transition на root div: `transition-colors duration-300` для плавной смены

**Progress bar:**
- bg: `var(--landing-progress-bg)`
- Gradient полоска: `from-[#2C4FF8] to-[var(--landing-green)]`

**Metric cards (Уроков/Курсов):**
- "405" цвет: light=#2C4FF8, dark=#4D6FFF → CSS переменная `--landing-metric-blue`
- "6" цвет: `var(--landing-green)`

**Ambient background glows:**
- Primary glow: `bg-[var(--landing-glow-primary)]` (уже с opacity в переменной)
- Secondary glow: `bg-[var(--landing-glow-secondary)]`

**glow-pulse animation:**
- CSS keyframe использует box-shadow. Оба варианта отличаются opacity.
- Решение: CSS-переменные `--landing-glow-box-shadow` и `--landing-glow-box-shadow-active` в @keyframes через custom properties.

ВАЖНО: Компонент должен быть один файл `page.tsx` (~350-400 строк). Не разбивать на отдельные файлы секций — это лендинг, не app layout.

ВАЖНО: design-v1/v2/v3/v4/v4a/v4b/design-demo — НЕ УДАЛЯТЬ (per CONTEXT.md deferred decision).
  </action>
  <verify>
    <automated>cd D:/GpT_docs/MPSTATS\ ACADEMY\ ADAPTIVE\ LEARNING/MAAL && npx tsc --noEmit --project apps/web/tsconfig.json 2>&1 | head -20</automated>
    <manual>Открыть localhost:3000 — лендинг в светлой теме. Кликнуть toggle — лендинг перерисовывается в тёмную тему. CTA блок тёмный в обеих темах. Radar chart читаемый.</manual>
  </verify>
  <done>
    - app/page.tsx содержит unified landing с CSS-переменными
    - ThemeToggle отображается в header между логотипом и auth-кнопками
    - Light тема по умолчанию (design-v4a)
    - Dark тема при toggle (design-v1)
    - CTA блок тёмный в обеих темах
    - SVG radar chart корректен в обеих темах
    - Плавный transition ~300ms при смене темы
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Визуальная проверка лендинга в обеих темах</name>
  <files>apps/web/src/app/page.tsx</files>
  <action>
Визуальная верификация пользователем. Unified landing page с theme toggle — light (design-v4a) и dark (design-v1) темы, sticky header, SVG radar chart, dark CTA блок.

Шаги проверки:
1. Открыть http://localhost:3000
2. Убедиться что лендинг отображается в светлой теме (белый фон, тёмный текст)
3. Найти иконку Sun/Moon в header (справа от логотипа, перед "Войти")
4. Кликнуть toggle — лендинг должен плавно (~300ms) переключиться на тёмную тему
5. Проверить: SVG radar chart читаемый в обеих темах (цветные точки на пентагоне)
6. Проскроллить вниз — CTA блок (тёмно-синий) одинаково тёмный в обеих темах
7. Обновить страницу — выбранная тема сохраняется (localStorage)
8. Проверить на мобильном размере (DevTools responsive) — layout адаптивный
  </action>
  <verify>Human visual verification of both themes</verify>
  <done>Пользователь подтвердил "approved" — обе темы выглядят корректно</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` проходит без ошибок
2. Лендинг отображается в light теме по умолчанию
3. Toggle переключает на dark тему с плавным transition
4. CTA блок тёмный в обеих темах
5. SVG radar chart корректен в обеих темах
6. Тема сохраняется в localStorage между визитами
7. Responsive layout работает (mobile/desktop)
</verification>

<success_criteria>
- Лендинг визуально соответствует design-v4a в light и design-v1 в dark
- Toggle работает с плавной анимацией
- CTA блок всегда тёмный
- Тема персистентна через localStorage
- Нет FOUC при загрузке
- Пользователь подтвердил визуальное качество (checkpoint)
</success_criteria>

<output>
After completion, create `.planning/phases/15-landing-redesign-theme-toggle/15-02-SUMMARY.md`
</output>
